<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_35) on Wed Feb 13 10:57:02 PST 2013 -->
<TITLE>
WriteLock (HCatalog 0.5.0-incubating API)
</TITLE>

<META NAME="date" CONTENT="2013-02-13">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="WriteLock (HCatalog 0.5.0-incubating API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/WriteLock.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/LockListener.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/ZNodeName.html" title="class in org.apache.hcatalog.hbase.snapshot.lock"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="WriteLock.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.hcatalog.hbase.snapshot.lock</FONT>
<BR>
Class WriteLock</H2>
<PRE>
Object
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><B>WriteLock</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>WriteLock</B><DT>extends Object</DL>
</PRE>

<P>
A <a href="package.html">protocol to implement an exclusive
  write lock or to elect a leader</a>. <p/> You invoke <A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#lock()"><CODE>lock()</CODE></A> to
  start the process of grabbing the lock; you may get the lock then or it may be
  some time later. <p/> You can register a listener so that you are invoked
  when you get the lock; otherwise you can ask if you have the lock
  by calling <A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#isOwner()"><CODE>isOwner()</CODE></A>
  This class has been used as-is from the zookeeper 3.4.0 recipes. The only change
  made is a TODO for sorting using suffixes and the package name.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;ZooKeeper</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#zookeeper">zookeeper</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#WriteLock(org.apache.zookeeper.ZooKeeper, java.lang.String, java.util.List)">WriteLock</A></B>(ZooKeeper&nbsp;zookeeper,
          String&nbsp;dir,
          List&lt;ACL&gt;&nbsp;acl)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zookeeper contructor for writelock</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#WriteLock(org.apache.zookeeper.ZooKeeper, java.lang.String, java.util.List, org.apache.hcatalog.hbase.snapshot.lock.LockListener)">WriteLock</A></B>(ZooKeeper&nbsp;zookeeper,
          String&nbsp;dir,
          List&lt;ACL&gt;&nbsp;acl,
          <A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/LockListener.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock">LockListener</A>&nbsp;callback)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zookeeper contructor for writelock with callback</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Closes this strategy and releases any ZooKeeper resources; but keeps the
  ZooKeeper instance open</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#doClose()">doClose</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Allow derived classes to perform
 some custom closing operations to release resources</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#ensureExists(java.lang.String, byte[], java.util.List, org.apache.zookeeper.CreateMode)">ensureExists</A></B>(String&nbsp;path,
             byte[]&nbsp;data,
             List&lt;ACL&gt;&nbsp;acl,
             CreateMode&nbsp;flags)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensures that the given path exists with the given data, ACL and flags</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#ensurePathExists(java.lang.String)">ensurePathExists</A></B>(String&nbsp;path)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ensures that the given path exists with no data, the current
 ACL and no flags</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;List&lt;ACL&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#getAcl()">getAcl</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return the acl its using</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#getDir()">getDir</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return the parent dir for lock</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#getId()">getId</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return the id for this lock</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/LockListener.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock">LockListener</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#getLockListener()">getLockListener</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return the current locklistener</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#getRetryDelay()">getRetryDelay</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get the retry delay in milliseconds</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;ZooKeeper</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#getZookeeper()">getZookeeper</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return zookeeper client instance</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#isClosed()">isClosed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if this protocol has been closed</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#isOwner()">isOwner</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if this node is the owner of the
  lock (or the leader)</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#lock()">lock</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attempts to acquire the exclusive write lock returning whether or not it was
 acquired.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#retryDelay(int)">retryDelay</A></B>(int&nbsp;attemptCount)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Performs a retry delay if this is not the first attempt</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;Object</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#retryOperation(org.apache.hcatalog.hbase.snapshot.lock.ZooKeeperOperation)">retryOperation</A></B>(<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/ZooKeeperOperation.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock">ZooKeeperOperation</A>&nbsp;operation)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Perform the given operation, retrying if the connection fails</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#setAcl(java.util.List)">setAcl</A></B>(List&lt;ACL&gt;&nbsp;acl)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set the acl</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#setLockListener(org.apache.hcatalog.hbase.snapshot.lock.LockListener)">setLockListener</A></B>(<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/LockListener.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock">LockListener</A>&nbsp;callback)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;register a different call back listener</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#setRetryDelay(long)">setRetryDelay</A></B>(long&nbsp;retryDelay)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the time waited between retry delays</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html#unlock()">unlock</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Removes the lock or associated znode if
 you no longer require the lock.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="zookeeper"><!-- --></A><H3>
zookeeper</H3>
<PRE>
protected final ZooKeeper <B>zookeeper</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="WriteLock(org.apache.zookeeper.ZooKeeper, java.lang.String, java.util.List)"><!-- --></A><H3>
WriteLock</H3>
<PRE>
public <B>WriteLock</B>(ZooKeeper&nbsp;zookeeper,
                 String&nbsp;dir,
                 List&lt;ACL&gt;&nbsp;acl)</PRE>
<DL>
<DD>zookeeper contructor for writelock
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>zookeeper</CODE> - zookeeper client instance<DD><CODE>dir</CODE> - the parent path you want to use for locking<DD><CODE>acl</CODE> - the acls that you want to use for all the paths,
 if null world read/write is used.</DL>
</DL>
<HR>

<A NAME="WriteLock(org.apache.zookeeper.ZooKeeper, java.lang.String, java.util.List, org.apache.hcatalog.hbase.snapshot.lock.LockListener)"><!-- --></A><H3>
WriteLock</H3>
<PRE>
public <B>WriteLock</B>(ZooKeeper&nbsp;zookeeper,
                 String&nbsp;dir,
                 List&lt;ACL&gt;&nbsp;acl,
                 <A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/LockListener.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock">LockListener</A>&nbsp;callback)</PRE>
<DL>
<DD>zookeeper contructor for writelock with callback
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>zookeeper</CODE> - the zookeeper client instance<DD><CODE>dir</CODE> - the parent path you want to use for locking<DD><CODE>acl</CODE> - the acls that you want to use for all the paths<DD><CODE>callback</CODE> - the call back instance</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getLockListener()"><!-- --></A><H3>
getLockListener</H3>
<PRE>
public <A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/LockListener.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock">LockListener</A> <B>getLockListener</B>()</PRE>
<DL>
<DD>return the current locklistener
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the locklistener</DL>
</DD>
</DL>
<HR>

<A NAME="setLockListener(org.apache.hcatalog.hbase.snapshot.lock.LockListener)"><!-- --></A><H3>
setLockListener</H3>
<PRE>
public void <B>setLockListener</B>(<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/LockListener.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock">LockListener</A>&nbsp;callback)</PRE>
<DL>
<DD>register a different call back listener
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>callback</CODE> - the call back instance</DL>
</DD>
</DL>
<HR>

<A NAME="unlock()"><!-- --></A><H3>
unlock</H3>
<PRE>
public void <B>unlock</B>()
            throws RuntimeException</PRE>
<DL>
<DD>Removes the lock or associated znode if
 you no longer require the lock. this also
 removes your request in the queue for locking
 in case you do not already hold the lock.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>RuntimeException</CODE> - throws a runtime exception
 if it cannot connect to zookeeper.</DL>
</DD>
</DL>
<HR>

<A NAME="lock()"><!-- --></A><H3>
lock</H3>
<PRE>
public boolean <B>lock</B>()
             throws KeeperException,
                    InterruptedException</PRE>
<DL>
<DD>Attempts to acquire the exclusive write lock returning whether or not it was
 acquired. Note that the exclusive lock may be acquired some time later after
 this method has been invoked due to the current lock owner going away.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>KeeperException</CODE>
<DD><CODE>InterruptedException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getDir()"><!-- --></A><H3>
getDir</H3>
<PRE>
public String <B>getDir</B>()</PRE>
<DL>
<DD>return the parent dir for lock
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the parent dir used for locks.</DL>
</DD>
</DL>
<HR>

<A NAME="isOwner()"><!-- --></A><H3>
isOwner</H3>
<PRE>
public boolean <B>isOwner</B>()</PRE>
<DL>
<DD>Returns true if this node is the owner of the
  lock (or the leader)
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getId()"><!-- --></A><H3>
getId</H3>
<PRE>
public String <B>getId</B>()</PRE>
<DL>
<DD>return the id for this lock
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the id for this lock</DL>
</DD>
</DL>
<HR>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()</PRE>
<DL>
<DD>Closes this strategy and releases any ZooKeeper resources; but keeps the
  ZooKeeper instance open
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getZookeeper()"><!-- --></A><H3>
getZookeeper</H3>
<PRE>
public ZooKeeper <B>getZookeeper</B>()</PRE>
<DL>
<DD>return zookeeper client instance
<P>
<DD><DL>

<DT><B>Returns:</B><DD>zookeeper client instance</DL>
</DD>
</DL>
<HR>

<A NAME="getAcl()"><!-- --></A><H3>
getAcl</H3>
<PRE>
public List&lt;ACL&gt; <B>getAcl</B>()</PRE>
<DL>
<DD>return the acl its using
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the acl.</DL>
</DD>
</DL>
<HR>

<A NAME="setAcl(java.util.List)"><!-- --></A><H3>
setAcl</H3>
<PRE>
public void <B>setAcl</B>(List&lt;ACL&gt;&nbsp;acl)</PRE>
<DL>
<DD>set the acl
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>acl</CODE> - the acl to set to</DL>
</DD>
</DL>
<HR>

<A NAME="getRetryDelay()"><!-- --></A><H3>
getRetryDelay</H3>
<PRE>
public long <B>getRetryDelay</B>()</PRE>
<DL>
<DD>get the retry delay in milliseconds
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the retry delay</DL>
</DD>
</DL>
<HR>

<A NAME="setRetryDelay(long)"><!-- --></A><H3>
setRetryDelay</H3>
<PRE>
public void <B>setRetryDelay</B>(long&nbsp;retryDelay)</PRE>
<DL>
<DD>Sets the time waited between retry delays
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>retryDelay</CODE> - the retry delay</DL>
</DD>
</DL>
<HR>

<A NAME="doClose()"><!-- --></A><H3>
doClose</H3>
<PRE>
protected void <B>doClose</B>()</PRE>
<DL>
<DD>Allow derived classes to perform
 some custom closing operations to release resources
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="retryOperation(org.apache.hcatalog.hbase.snapshot.lock.ZooKeeperOperation)"><!-- --></A><H3>
retryOperation</H3>
<PRE>
protected Object <B>retryOperation</B>(<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/ZooKeeperOperation.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock">ZooKeeperOperation</A>&nbsp;operation)
                         throws KeeperException,
                                InterruptedException</PRE>
<DL>
<DD>Perform the given operation, retrying if the connection fails
<P>
<DD><DL>

<DT><B>Returns:</B><DD>object. it needs to be cast to the callee's expected
 return type.
<DT><B>Throws:</B>
<DD><CODE>KeeperException</CODE>
<DD><CODE>InterruptedException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="ensurePathExists(java.lang.String)"><!-- --></A><H3>
ensurePathExists</H3>
<PRE>
protected void <B>ensurePathExists</B>(String&nbsp;path)</PRE>
<DL>
<DD>Ensures that the given path exists with no data, the current
 ACL and no flags
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="ensureExists(java.lang.String, byte[], java.util.List, org.apache.zookeeper.CreateMode)"><!-- --></A><H3>
ensureExists</H3>
<PRE>
protected void <B>ensureExists</B>(String&nbsp;path,
                            byte[]&nbsp;data,
                            List&lt;ACL&gt;&nbsp;acl,
                            CreateMode&nbsp;flags)</PRE>
<DL>
<DD>Ensures that the given path exists with the given data, ACL and flags
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>path</CODE> - <DD><CODE>acl</CODE> - <DD><CODE>flags</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="isClosed()"><!-- --></A><H3>
isClosed</H3>
<PRE>
protected boolean <B>isClosed</B>()</PRE>
<DL>
<DD>Returns true if this protocol has been closed
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if this protocol is closed</DL>
</DD>
</DL>
<HR>

<A NAME="retryDelay(int)"><!-- --></A><H3>
retryDelay</H3>
<PRE>
protected void <B>retryDelay</B>(int&nbsp;attemptCount)</PRE>
<DL>
<DD>Performs a retry delay if this is not the first attempt
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>attemptCount</CODE> - the number of the attempts performed so far</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/WriteLock.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/LockListener.html" title="interface in org.apache.hcatalog.hbase.snapshot.lock"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hcatalog/hbase/snapshot/lock/ZNodeName.html" title="class in org.apache.hcatalog.hbase.snapshot.lock"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hcatalog/hbase/snapshot/lock/WriteLock.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="WriteLock.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
