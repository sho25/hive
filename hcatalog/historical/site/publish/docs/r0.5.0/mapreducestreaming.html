<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.9">
<meta name="Forrest-skin-name" content="pelt">
<title>POST mapreduce/streaming </title>
<link type="text/css" href="skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="skin/print.css" rel="stylesheet">
<link type="text/css" href="skin/profile.css" rel="stylesheet">
<script src="skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<!--+
    |breadtrail
    +-->
<div class="breadtrail">
<script src="skin/breadcrumbs.js" language="JavaScript" type="text/javascript"></script>
</div>
<!--+
    |header
    +-->
<div class="header">
<!--+
    |start group logo
    +-->
<div class="grouplogo">
<a href=""><img class="logoImage" alt="HCatalog" src="images/hcat.jpg" title=""></a>
</div>
<!--+
    |end group logo
    +-->
<!--+
    |start Project Logo
    +-->
<div class="projectlogoA1">
<a href=""><img class="logoImage" alt="HCatalog" src="images/hcat-box.jpg" title="A table abstraction on top of data for use with java MapReduce programs, Pig scripts and Hive queryies."></a>
</div>
<!--+
    |end Project Logo
    +-->
<!--+
    |start Tabs
    +-->
<ul id="tabs">
<li class="current">
<a class="selected" href="index.html">HCatalog 0.5.0 Documentation</a>
</li>
</ul>
<!--+
    |end Tabs
    +-->
</div>
</div>
<div id="main">
<div id="publishedStrip">
<!--+
    |start Subtabs
    +-->
<div id="level2tabs"></div>
<!--+
    |end Endtabs
    +-->
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<!--+
    |breadtrail
    +-->
<div class="breadtrail">

             &nbsp;
           </div>
<!--+
    |start Menu, mainarea
    +-->
<!--+
    |start Menu
    +-->
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', 'skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">HCatalog</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="index.html">Overview</a>
</div>
<div class="menuitem">
<a href="install.html">Installation From Tarball</a>
</div>
<div class="menuitem">
<a href="loadstore.html">Load &amp; Store Interfaces</a>
</div>
<div class="menuitem">
<a href="inputoutput.html">Input &amp; Output Interfaces</a>
</div>
<div class="menuitem">
<a href="readerwriter.html">Reader &amp; Writer Interfaces</a>
</div>
<div class="menuitem">
<a href="cli.html">Command Line Interface</a>
</div>
<div class="menuitem">
<a href="supportedformats.html">Storage Formats</a>
</div>
<div class="menuitem">
<a href="dynpartition.html">Dynamic Partitioning</a>
</div>
<div class="menuitem">
<a href="notification.html">Notification</a>
</div>
<div class="menuitem">
<a href="authorization.html">Authorization</a>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.11', 'skin/')" id="menu_selected_1.1.11Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">WebHCat</div>
<div id="menu_selected_1.1.11" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="rest.html">Overview</a>
</div>
<div class="menuitem">
<a href="rest_server_install.html">Installation</a>
</div>
<div class="menuitem">
<a href="configuration.html">Configuration</a>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.11.4', 'skin/')" id="menu_selected_1.1.11.4Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">Reference</div>
<div id="menu_selected_1.1.11.4" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="resources.html">Resource List</a>
</div>
<div class="menuitem">
<a href="responsetypes.html">:version</a>
</div>
<div class="menuitem">
<a href="status.html">status</a>
</div>
<div class="menuitem">
<a href="versions.html">version</a>
</div>
<div onclick="SwitchMenu('menu_1.1.11.4.5', 'skin/')" id="menu_1.1.11.4.5Title" class="menutitle">ddl</div>
<div id="menu_1.1.11.4.5" class="menuitemgroup">
<div class="menuitem">
<a href="ddlsummary.html">ddl (summary)</a>
</div>
<div class="menuitem">
<a href="ddl.html">ddl</a>
</div>
<div class="menuitem">
<a href="listdbs.html">database</a>
</div>
<div class="menuitem">
<a href="descdb.html">:db (GET)</a>
</div>
<div class="menuitem">
<a href="createdb.html">:db (PUT)</a>
</div>
<div class="menuitem">
<a href="deletedb.html">:db (DELETE)</a>
</div>
<div class="menuitem">
<a href="listtables.html">table</a>
</div>
<div class="menuitem">
<a href="desctable.html">:table (GET)</a>
</div>
<div class="menuitem">
<a href="createtable.html">:table (PUT)</a>
</div>
<div class="menuitem">
<a href="renametable.html">:table (POST)</a>
</div>
<div class="menuitem">
<a href="deletetable.html">:table (DELETE)</a>
</div>
<div class="menuitem">
<a href="createtablelike.html">like/:table (PUT)</a>
</div>
<div class="menuitem">
<a href="listpartitions.html">partition</a>
</div>
<div class="menuitem">
<a href="descpartition.html">:partition (GET)</a>
</div>
<div class="menuitem">
<a href="createpartition.html">:partition (PUT)</a>
</div>
<div class="menuitem">
<a href="deletepartition.html">:partition (DELETE)</a>
</div>
<div class="menuitem">
<a href="listcolumns.html">column</a>
</div>
<div class="menuitem">
<a href="desccolumn.html">:column (GET)</a>
</div>
<div class="menuitem">
<a href="createcolumn.html">:column (PUT)</a>
</div>
<div class="menuitem">
<a href="listproperties.html">property</a>
</div>
<div class="menuitem">
<a href="descproperty.html">:property (GET)</a>
</div>
<div class="menuitem">
<a href="addproperty.html">:property (PUT)</a>
</div>
</div>
<div class="menupage">
<div class="menupagetitle">mapreduce/streaming</div>
</div>
<div class="menuitem">
<a href="mapreducejar.html">mapreduce/jar</a>
</div>
<div class="menuitem">
<a href="pig.html">pig</a>
</div>
<div class="menuitem">
<a href="hive.html">hive</a>
</div>
<div class="menuitem">
<a href="queuelist.html">queue</a>
</div>
<div class="menuitem">
<a href="queue.html">:jobid (GET)</a>
</div>
<div class="menuitem">
<a href="queuedelete.html">:jobid (DELETE)</a>
</div>
</div>
</div>
<div class="menuitem">
<a href="api/index.html">API Docs</a>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<!--+
  |alternative credits
  +-->
<div id="credit2"></div>
</div>
<!--+
    |end Menu
    +-->
<!--+
    |start content
    +-->
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="mapreducestreaming.pdf"><img alt="PDF -icon" src="skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>POST mapreduce/streaming </h1>
<div id="front-matter">
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#Description">Description</a>
</li>
<li>
<a href="#URL">URL</a>
</li>
<li>
<a href="#Parameters">Parameters</a>
</li>
<li>
<a href="#Results">Results</a>
</li>
<li>
<a href="#Example">Example</a>
</li>
</ul>
</div>
</div>

  
<a name="Description"></a>
<h2 class="h3">Description</h2>
<div class="section">
<p>Create and queue an
     <a href="http://hadoop.apache.org/common/docs/current/streaming.html">Hadoop
      streaming MapReduce</a> job.</p>
</div>

  
<a name="URL"></a>
<h2 class="h3">URL</h2>
<div class="section">
<p>
<span class="codefrag">http://</span>www.myserver.com<span class="codefrag">/templeton/v1/mapreduce/streaming</span>
</p>
</div>

  
<a name="Parameters"></a>
<h2 class="h3">Parameters</h2>
<div class="section">
<table class="ForrestTable" cellspacing="1" cellpadding="4">
    
<tr>
<th colspan="1" rowspan="1">Name</th><th colspan="1" rowspan="1">Description</th><th colspan="1" rowspan="1">Required?</th><th colspan="1" rowspan="1">Default</th>
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>input</strong></td>
        <td colspan="1" rowspan="1">Location of the input data in Hadoop.</td>
        <td colspan="1" rowspan="1">Required</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>output</strong></td>
        <td colspan="1" rowspan="1">Location in which to store the output data.  If not specified,
            Templeton will store the output in a location that can be discovered
            using the <a href="queue.html">queue</a> resource.</td>
        <td colspan="1" rowspan="1">Optional</td>
        <td colspan="1" rowspan="1">See description</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>mapper</strong></td>
        <td colspan="1" rowspan="1">Location of the mapper program in Hadoop.</td>
        <td colspan="1" rowspan="1">Required</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>reducer</strong></td>
        <td colspan="1" rowspan="1">Location of the reducer program in Hadoop.</td>
        <td colspan="1" rowspan="1">Required</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>file</strong></td>
        <td colspan="1" rowspan="1">Add an HDFS file to the distributed cache.</td>
        <td colspan="1" rowspan="1">Optional</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>define</strong></td>
        <td colspan="1" rowspan="1">Set an Hadoop configuration variable using the syntax
         <span class="codefrag">define=NAME=VALUE</span></td>
        <td colspan="1" rowspan="1">Optional</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>cmdenv</strong></td>
        <td colspan="1" rowspan="1">Set an environment variable using the syntax
         <span class="codefrag">cmdenv=NAME=VALUE</span></td>
        <td colspan="1" rowspan="1">Optional</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>arg</strong></td>
        <td colspan="1" rowspan="1">Set a program argument.</td>
        <td colspan="1" rowspan="1">Optional</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>statusdir</strong></td>
        <td colspan="1" rowspan="1">A directory where Templeton will write the status of the
         Map Reduce job.  If provided, it is the caller's responsibility
         to remove this directory when done.</td>
        <td colspan="1" rowspan="1">Optional</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
<tr>
<td colspan="1" rowspan="1"><strong>callback</strong></td>
        <td colspan="1" rowspan="1">Define a URL to be called upon job completion. You may embed a specific
         job ID into this URL using <span class="codefrag">$jobId</span>.  This tag
         will be replaced in the callback URL with this job's job ID.</td>
        <td colspan="1" rowspan="1">Optional</td>
        <td colspan="1" rowspan="1">None</td>
    
</tr>

    
</table>
</div>

  
<a name="Results"></a>
<h2 class="h3">Results</h2>
<div class="section">
<table class="ForrestTable" cellspacing="1" cellpadding="4">
      
<tr>
<th colspan="1" rowspan="1">Name</th><th colspan="1" rowspan="1">Description</th>
</tr>

      
<tr>
<td colspan="1" rowspan="1"><strong>id</strong></td>
        <td colspan="1" rowspan="1">A string containing the job ID similar to "job_201110132141_0001".</td>
      
</tr>

      
<tr>
<td colspan="1" rowspan="1"><strong>info</strong></td>
        <td colspan="1" rowspan="1">A JSON object containing the information returned when the job was queued.
            See the Hadoop documentation
            (<a href="http://hadoop.apache.org/common/docs/stable/api/org/apache/hadoop/mapred/TaskController.html">Class
            TaskController</a>) for more information.</td>
      
</tr>
     
</table>
</div>

  
<a name="Example"></a>
<h2 class="h3">Example</h2>
<div class="section">
<p>
<strong>Code and Data Setup</strong>
</p>
<pre class="code">
% cat mydata/file01 mydata/file02
Hello World Bye World
Hello Hadoop Goodbye Hadoop

% hadoop fs -put mydata/ .

% hadoop fs -ls mydata
Found 2 items
-rw-r--r--   1 ctdean supergroup         23 2011-11-11 13:29 /user/ctdean/mydata/file01
-rw-r--r--   1 ctdean supergroup         28 2011-11-11 13:29 /user/ctdean/mydata/file02
</pre>
<p>
<strong>Curl Command</strong>
</p>
<pre class="code">
% curl -s -d user.name=ctdean \
       -d input=mydata \
       -d output=mycounts \
       -d mapper=/bin/cat \
       -d reducer="/usr/bin/wc -w" \
       'http://localhost:50111/templeton/v1/mapreduce/streaming'
</pre>
<p>
<strong>JSON Output</strong>
</p>
<pre class="code">
{
 "id": "job_201111111311_0008",
 "info": {
          "stdout": "packageJobJar: [] [/Users/ctdean/var/hadoop/hadoop-0.20.205.0/share/hadoop/contrib/streaming/hadoop-streaming-0.20.205.0.jar...
                    templeton-job-id:job_201111111311_0008
                    ",
          "stderr": "11/11/11 13:26:43 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments
                    11/11/11 13:26:43 INFO mapred.FileInputFormat: Total input paths to process : 2
                    ",
          "exitcode": 0
         }
}
</pre>
<p>
<strong>Results</strong>
</p>
<pre class="code">
% hadoop fs -ls mycounts
Found 3 items
-rw-r--r--   1 ctdean supergroup          0 2011-11-11 13:27 /user/ctdean/mycounts/_SUCCESS
drwxr-xr-x   - ctdean supergroup          0 2011-11-11 13:26 /user/ctdean/mycounts/_logs
-rw-r--r--   1 ctdean supergroup         10 2011-11-11 13:27 /user/ctdean/mycounts/part-00000

% hadoop fs -cat mycounts/part-00000
      8
</pre>
</div>
  
</div>
<!--+
    |end content
    +-->
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<!--+
    |start bottomstrip
    +-->
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("Last Published: " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2012-2013 <a href="http://www.apache.org/licenses/">The Apache Software Foundation</a>
</div>
<!--+
    |end bottomstrip
    +-->
</div>
</body>
</html>
