############################################################################
#  Licensed to the Apache Software Foundation (ASF) under one or more
#  contributor license agreements.  See the NOTICE file distributed with
#  this work for additional information regarding copyright ownership.
#  The ASF licenses this file to You under the Apache License, Version 2.0
#  (the "License"); you may not use this file except in compliance with
#  the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

my $me = `whoami`;
chomp $me;

#get the hive version from the hive build.properties
my $hive_build_properties = "$ENV{HCAT_ROOT}/hive/external/build.properties";
my $hive_version = `cat $hive_build_properties | grep '^version=' | cut -d= -f2`;
chomp $hive_version;

# The contents of this file can be rewritten to fit your installation.
# Also, you can define the following environment variables and set things up as in the test setup
# PH_ROOT     Root directory where test harness is installed
# PH_LOCAL    Root directory for input and output for local mode tests
# PH_OUT      Root directory where output data will be stored (on local disk, not HDFS)
# PH_CLUSTER  Root directory for cluster being used
# HCAT_ROOT   Root directory for hcat version being used

$cfg = {
    #HDFS
    'inpathbase'     => '/user/hcat/tests/data'
    , 'outpathbase'    => '/user/hcat/out'

   #LOCAL
    , 'localinpathbase'   => "$ENV{PH_LOCAL}/in" 
    , 'localoutpathbase'  => "$ENV{PH_LOCAL}/out/log" 
    , 'localxmlpathbase'  => "$ENV{PH_LOCAL}/out/xml" 
    , 'localpathbase'     => "$ENV{PH_LOCAL}/out/pigtest/$me" 

    #TEST
    , 'benchmarkPath'    => "$ENV{PH_OUT}/benchmarks"
    , 'scriptPath'       => "$ENV{PH_ROOT}/libexec"
    , 'tmpPath'          => "/tmp/pigtest"
    , 'jythonjar'        => "$ENV{PH_JYTHON_JAR}"

    #TESTDB
    , 'dbuser'         => 'hcattest'
    , 'dbhost'         => 'localhost'
    , 'dbpasswd'       => 'hcattest'
    , 'dbdb'           => 'hcattestdb'

    #COMMON
    , 'metastore.principal' => "$ENV{METASTORE_PRINCIPAL}"   
    , 'metastore_thrift' => $ENV{'PH_METASTORE_THRIFT'}
    , 'thriftserver' => "$ENV{HCAT_URL}"

    #HCAT
    , 'hcat_data_dir'    => '/user/hcat/tests/data'
    , 'hivehome'          => $ENV{'PH_HIVE_HOME'}
    , 'hcathome'          => $ENV{'HCAT_INSTALL_DIR'}
    , 'hcatalog.jar' => "$ENV{HCAT_JAR},$ENV{HIVE_ROOT}/build/dist/lib/hive-serde-$hive_version.jar,$ENV{HIVE_ROOT}/build/dist/lib/hive-exec-$hive_version.jar,$ENV{PIG_HOME}/pig-0.9.2-withouthadoop.jar,$ENV{HIVE_ROOT}/build/dist/lib/hive-metastore-$hive_version.jar,$ENV{HIVE_ROOT}/build/dist/lib/libfb303-0.7.0.jar,$ENV{HIVE_ROOT}/build/dist/lib/jdo2-api-2.3-ec.jar,$ENV{HCAT_ROOT}/storage-handlers/hbase/build/ivy/lib/hbase-storage-handler/hbase-0.92.0.jar,$ENV{HCAT_ROOT}/storage-handlers/hbase/build/ivy/lib/hbase-storage-handler/zookeeper-3.4.3.jar,$ENV{HCAT_ROOT}/storage-handlers/hbase/build/hbase-storage-handler/hbase-storage-handler-0.1.0.jar,$ENV{HCAT_ROOT}/hive/external/build/dist/lib/hive-hbase-handler-$hive_version.jar"

    #PIG
    , 'testconfigpath'   => "$ENV{PH_CLUSTER}"
    , 'hadoopbin'   => "$ENV{PH_CLUSTER_BIN}"
    , 'funcjarPath'      => "$ENV{PH_ROOT}/lib/java"
    , 'paramPath'        => "$ENV{PH_ROOT}/paramfiles"
    , 'pigpath'          => "$ENV{PIG_HOME}"
    , 'pigjar'           => "$ENV{PIG_JAR}" # Pig jar that doesn't have Antlr
    , 'oldpigpath'       => "$ENV{PH_OLDPIG}"
    , 'additionaljars' => "$ENV{HCAT_ROOT}/build/hcatalog/hcatalog-0.4.0.jar:$ENV{HCAT_ROOT}/hive/external/build/metastore/hive-metastore-$hive_version.jar:$ENV{HCAT_ROOT}/hive/external/build/dist/lib/libthrift.jar:$ENV{HCAT_ROOT}/hive/external/build/dist/lib/hive-exec-$hive_version.jar:$ENV{HCAT_ROOT}/hive/external/build/dist/lib/libfb303.jar:$ENV{HCAT_ROOT}/hive/external/build/dist/lib/jdo2-api-2.3-ec.jar::$ENV{HCAT_ROOT}/storage-handlers/hbase/build/ivy/lib/hbase-storage-handler/hbase-0.92.0.jar:$ENV{HCAT_ROOT}/storage-handlers/hbase/build/ivy/lib/hbase-storage-handler/zookeeper-3.4.3.jar:$ENV{HCAT_ROOT}/storage-handlers/hbase/build/hbase-storage-handler/hbase-storage-handler-0.1.0.jar:$ENV{HCAT_ROOT}/hive/external/build/dist/lib/hive-hbase-handler-$hive_version.jar:$ENV{'HCAT_INSTALL_DIR'}/etc/hcatalog"

    #HADOOP
    , 'hadoopHome'       => "$ENV{HCAT_ROOT}/lib"
    , 'hadoop_classpath' =>  "$ENV{HCAT_EXTRA_JARS}"
    , 'userhomePath' => "$ENV{HOME}"
    , 'local.bin'     => '/usr/bin'
    , 'logDir'                => "$ENV{PH_OUT}/log" 
    , 'propertiesFile'     => "./conf/testpropertiesfile.conf"
    , 'harness.console.level' => 'ERROR'

    #HIVE
    , 'hive_bin_location' => "$ENV{HIVE_ROOT}/build/dist/bin" 
    , 'hbaseconfigpath'   => "$ENV{HBASE_CONF_DIR}"
    , 'hivehome' => "$ENV{HIVE_HOME}"
    , 'hive.additionaljars' =>  "$ENV{HCAT_ROOT}/build/hcatalog/hcatalog-0.4.0.jar"

};
